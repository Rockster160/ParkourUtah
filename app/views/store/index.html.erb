<% content_for :body do %>
  <style>
    html, body { background: black; }
  </style>
<% end %>

<div class="row shopping-container">
  <br class="visible-xs"/>
  <br class="visible-xs"/>
  <div class="items-container col-sm-9 relative">

    <% unless user_signed_in? %>
      <div class="row">
        <h2 class="pkut-header">Please sign in to get access to the rest of the store.</h2>
      </div>
    <% end %>
    <% [:other, :classes, :clothing, :accessories, :gift_card].each do |category| %>
      <% next if category != :gift_card && !user_signed_in? %>
      <% if @items[category].present? %>
        <div class="row">
          <h2 class="pkut-header title pull-left hidden-xs"><%= category.to_s.split('_').map(&:capitalize).join(' ') %></h2>
          <h2 class="pkut-header title visible-xs"><%= category.to_s.split('_').map(&:capitalize).join(' ') %></h2>
        </div>
        <% @items[category].sort_by { |i| i.item_order }.each do |item| %>
          <div class="item-flip-container" ontouchstart="this.classList.toggle('hover');">
            <div class="item-flipper">
              <div class="item-front">
                <div class="front-container">
                  <br/>
                  <strong><%= item.title %></strong><br/>
                  <%= number_to_currency(item.cost_in_dollars) %><%= item.is_subscription? ? "/month" : "" %><br/>
                  <%= image_tag(item.display, class: "item-img #{item.is_full_image ? 'full-item-img' : ''}") if item.display_file_size %>
                </div>
              </div>
              <div class="item-back">
                <p class="item-text"><%= item.description %></p>
                <a class="hover-btn forceOpen" style="text-align: center;" data-toggle="modal" data-target="#details<%= item.id %>">Read More</a>
                <% if item.colors && item.sizes %>
                  <a alt="..." class="pkut-btn" data-toggle="modal" data-target="#info<%= item.id %>">Colors/Sizes</a><br/>
                <% elsif item.colors %>
                  <a alt="..." class="pkut-btn" data-toggle="modal" data-target="#info<%= item.id %>">Select Color</a><br/>
                <% elsif item.sizes %>
                  <a alt="..." class="pkut-btn" data-toggle="modal" data-target="#info<%= item.id %>">Select Size</a><br/>
                <% else %>
                  <%= link_to "Add to Cart", update_cart_path(item_id: item.id), class: "pkut-btn", remote: true, method: :post %><br/>
                <% end %>
              </div>
            </div>
          </div>
          <%= render partial: 'layouts/message', locals: {modal_id: "details#{item.id}", title: item.title, message: item.description} %>
          <%= render partial: 'store/selection_modal', locals: {item: item} %>
        <% end %>
      <% end %>
    <% end %>
  </div>
  <div class="col-sm-3 cart-container">
    <%= render partial: 'cart' %>
  </div>
</div>
